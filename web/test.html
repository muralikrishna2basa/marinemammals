<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="application/javascript" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="application/javascript" src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script type="application/javascript"
            src="http://www.odnature.be/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="application/javascript"
            src="http://www.odnature.be/js/odnature/global.js"></script>

    <script type="application/javascript" src="/js/jquery.easytabs.min.js"></script>
    <script type="application/javascript" src="/js/addsymfonyprototype.js"></script>
    <script type="application/javascript" src="/js/date.js"></script>
    <script type="application/javascript"
            src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
    <script type="application/javascript"
            src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/additional-methods.min.js"></script>
    <script type="application/javascript">
        function stationOrCoord(station, latDec, lonDec) {
            if (!lonDec && !latDec) {
                if (!station) {
                    return false;
                }
                else return true;
            }
            else {
                if (!validCoord(latDec, lonDec)) {
                    return false;
                }
                else return true; // either empty or nonempty stations
            }
        }

        function validCoord(latDec, lonDec) {
            if ((lonDec && !latDec) || !lonDec && latDec) {
                return false;
            }
            else return true;
        }

        function validLatDec(latDec) {
            return /^(\+|-)?(\d\.\d{1,6}|[1-8]\d\.\d{1,6}|90\.0{1,6})$/.test(latDec);
        }

        function validLonDec(lonDec) {
            return /^(\+|-)?([0-9][0-9]?.\d{1,6}|1[0-7][0-9].\d{1,6}|180.\d{1,6})$/.test(lonDec);
        }

        $(document).ready(function () {

            $("#formInput").easytabs({
                tabs: ".nav-tabs li",
                animate: false,
                tabActiveClass: "active"
            });
            var wholeForm = $('#formInput');


            /* var _validator =  wholeForm.validate({
             rules: {
             "observationstype[eseSeqno][eventDatetime][date]": 'dateBE',
             "observationstype[latDec]": 'validLatDec',
             "observationstype[lonDec]": 'validLonDec',
             "observationstype[eseSeqno][spec2events][scnSeqnoExisting]": {
             digits: true
             },
             "observationstype[eseSeqno][spec2events][scnSeqnoNew][scnNumber]": {
             digits: true
             },
             "observationstype[eseSeqno][spec2events][scnSeqnoNew][necropsyTag]": 'validNecropsyTag'
             }
             });*/
            /* var _validator =  wholeForm.validate({
             rules: {
             namefield: {
             digits: true,
             required:true
             }
             }
             });*/

            $.validator.addMethod("dateBE", function (value) {
                var dt = Date.parseExact(value, ["dd/MM/yyyy"]);
                return dt != null;
            }, 'Not a valid date. The correct date format is dd/mm/yyyy');

            $.validator.addMethod("validLatDec", function (value) {
                return validLatDec(value);
            }, '2 problems: either complete longitude or this value is not a decimal latitude (-90.0 <= x <= 90.0)');

            $.validator.addMethod("validLonDec", function (value) {
                return validLonDec(value);
            }, '2 problems: either complete latitude or this value is not a decimal longitude (-180.0 <= x <= 180.0)');

            var _validator =  wholeForm.validate({
                rules: {
                    "someInput1": 'dateBE',
                    "someInput2": 'validLatDec',
                    "someInput3": 'validLonDec',
                    "someInput4": {
                        digits: true
                    },
                    "someInput5": {
                        digits: true
                    }
                }
            });
/*
            $("#someInput1").rules("add", {
                digits: true,
                required: true
            });

            $("#someInput2").rules("add", {
                email: true,
                required: true
            });

            $("#someInput3").rules("add", {
                digits: true,
                required: true
            });

            $("#someInput4").rules("add", {
                'dateBE'
            });*/

            $("#test1").click(function () {
                $("#tabs-1 :input").each(function () {
                    var id = $(this).attr('id');
                    alert(id + ":" + _validator.element($('#' + id)));
                    if (!_validator.element($('#' + id))) {
                        $('#' + id).css('background-color', 'red');
                    }
                    else {
                        $('#' + id).css('background-color', 'green');
                    }
                });

            });

            $("#test2").click(function () {
                $("#tabs-2 :input").each(function () {
                    var id = $(this).attr('id');
                    alert(id + ":" + _validator.element($('#' + id)));
                    if (!_validator.element($('#' + id))) {
                        $('#' + id).css('background-color', 'red');
                    }
                    else {
                        $('#' + id).css('background-color', 'green');
                    }
                });

            });

        });
    </script>
</head>
<body>

<form id="formInput">
    <ul class="nav nav-tabs">
        <li class="tab"><a href="#tabs-1">TAB 1</a></li>
        <li class="tab"><a href="#tabs-2">TAB 2</a></li>
    </ul>
    <div class="well subformcontainer">
        <fieldset id="tabs-1">
            TAB 1
            Some Input1 <input type="text" name="someInput1" id="someInput1" required/>
            Some Input2 <input type="text" name="someInput2" id="someInput2" required/>
            Some Input3 <input type="text" name="someInput3" id="someInput3" required/>
            <input id="btnSubmit" type="submit"/>
            <a id="test1">Test validity</a>
        </fieldset>
        <fieldset id="tabs-2">
            TAB 2

            Some Input4 <input type="text" name="someInput4" id="someInput4" required/>
            Some Input5 <input type="text" name="someInput5" id="someInput5" required/>
            <input id="btnSubmit2" type="submit"/>
            <a id="test2">Test validity</a>
        </fieldset>
    </div>
</form>


</body>
</html>